(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{296:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>o});var t=s(5155),r=s(2115),l=s(7583),a=s(6874),i=s.n(a);function o(){let[e,n]=(0,r.useState)([]),[s,a]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[x,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{fetch("/sae202/?page=accueil&format=json",{credentials:"include"}).then(e=>e.json()).then(e=>{n(e.commentaires||[]),h(e.isConnected),m(e.isAdmin)}).catch(e=>c(e.message))},[]);let u=async e=>{if(e.preventDefault(),c(""),(await fetch("/sae202/?page=accueil",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({contenu:s}),credentials:"include"})).ok){a("");let e=await fetch("/sae202/?page=accueil&format=json",{credentials:"include"}).then(e=>e.json());n(e.commentaires||[]),h(e.isConnected),m(e.isAdmin)}else c("Erreur lors de l'envoi")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{isConnected:d,isAdmin:x}),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto mt-8 p-6 bg-white rounded shadow",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-4 text-gray-800",children:"Bienvenue sur la SAE202"}),(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Commentaires approuv\xe9s :"}),d?(0,t.jsxs)("form",{onSubmit:u,className:"mb-6 space-y-2",children:[(0,t.jsx)("textarea",{value:s,onChange:e=>a(e.target.value),required:!0,placeholder:"Votre commentaire",className:"w-full border rounded px-3 py-2",rows:3}),(0,t.jsx)("button",{type:"submit",className:"bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold py-2 px-4 rounded transition",children:"Envoyer"})]}):(0,t.jsxs)("p",{className:"mb-4 text-gray-600",children:[(0,t.jsx)(i(),{href:"/connexion",className:"text-yellow-500 underline hover:text-yellow-600",children:"Connectez-vous"})," ","pour ajouter un commentaire."]}),o&&(0,t.jsx)("pre",{className:"text-red-600 mb-4",children:o}),(0,t.jsx)("ul",{className:"space-y-2",children:e.map((e,n)=>(0,t.jsx)("li",{className:"bg-gray-100 rounded px-3 py-2 text-gray-800",children:e.contenu},n))})]})]})}},7583:(e,n,s)=>{"use strict";s.d(n,{A:()=>a});var t=s(5155),r=s(6874),l=s.n(r);function a(e){let{isConnected:n,isAdmin:s}=e;return(0,t.jsx)("nav",{className:"bg-gray-900 text-white shadow mb-8",children:(0,t.jsxs)("ul",{className:"flex flex-wrap items-center gap-4 px-6 py-3",children:[(0,t.jsx)("li",{children:(0,t.jsx)(l(),{href:"/",className:"hover:text-yellow-400 font-semibold transition",children:"Accueil"})}),(0,t.jsx)("li",{children:(0,t.jsx)(l(),{href:"/concept",className:"hover:text-yellow-400 transition",children:"Concept"})}),(0,t.jsx)("li",{children:(0,t.jsx)(l(),{href:"/infos",className:"hover:text-yellow-400 transition",children:"Infos pratiques"})}),n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{children:(0,t.jsx)(l(),{href:"/messagerie",className:"hover:text-yellow-400 transition",children:"Messagerie interne"})}),(0,t.jsx)("li",{children:(0,t.jsx)(l(),{href:"/profil",className:"hover:text-yellow-400 transition",children:"Mon profil"})}),s&&(0,t.jsx)("li",{children:(0,t.jsx)(l(),{href:"/gestion",className:"hover:text-red-400 font-bold transition",children:"Admin"})}),(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:"hover:text-yellow-400 transition bg-transparent border-none p-0 m-0 cursor-pointer",style:{background:"none"},onClick:async e=>{e.preventDefault();try{(await fetch("/sae202/?page=deconnexion",{method:"GET",credentials:"include",headers:{Accept:"application/json"}})).ok?window.location.href="/":alert("Erreur lors de la d\xe9connexion")}catch(e){alert("Erreur lors de la d\xe9connexion")}},children:"D\xe9connexion"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{children:(0,t.jsx)(l(),{href:"/inscription",className:"hover:text-yellow-400 transition",children:"Inscription"})}),(0,t.jsx)("li",{children:(0,t.jsx)(l(),{href:"/connexion",className:"hover:text-yellow-400 transition",children:"Connexion"})})]}),(0,t.jsx)("li",{children:(0,t.jsx)(l(),{href:"/mentions-legales",className:"hover:text-yellow-400 transition",children:"Mentions l\xe9gales"})})]})})}},7916:(e,n,s)=>{Promise.resolve().then(s.bind(s,296))}},e=>{var n=n=>e(e.s=n);e.O(0,[874,441,684,358],()=>n(7916)),_N_E=e.O()}]);