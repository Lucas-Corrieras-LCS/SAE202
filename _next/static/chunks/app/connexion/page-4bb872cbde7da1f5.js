(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{5302:(e,s,n)=>{Promise.resolve().then(n.bind(n,8260))},5695:(e,s,n)=>{"use strict";var r=n(8999);n.o(r,"useRouter")&&n.d(s,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(s,{useSearchParams:function(){return r.useSearchParams}})},7583:(e,s,n)=>{"use strict";n.d(s,{A:()=>a});var r=n(5155),t=n(6874),l=n.n(t);function a(e){let{isConnected:s,isAdmin:n}=e;return(0,r.jsx)("nav",{className:"bg-gray-900 text-white shadow mb-8",children:(0,r.jsxs)("ul",{className:"flex flex-wrap items-center gap-4 px-6 py-3",children:[(0,r.jsx)("li",{children:(0,r.jsx)(l(),{href:"/",className:"hover:text-yellow-400 font-semibold transition",children:"Accueil"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l(),{href:"/concept",className:"hover:text-yellow-400 transition",children:"Concept"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l(),{href:"/infos",className:"hover:text-yellow-400 transition",children:"Infos pratiques"})}),s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:(0,r.jsx)(l(),{href:"/messagerie",className:"hover:text-yellow-400 transition",children:"Messagerie interne"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l(),{href:"/profil",className:"hover:text-yellow-400 transition",children:"Mon profil"})}),n&&(0,r.jsx)("li",{children:(0,r.jsx)(l(),{href:"/gestion",className:"hover:text-red-400 font-bold transition",children:"Admin"})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:"hover:text-yellow-400 transition bg-transparent border-none p-0 m-0 cursor-pointer",style:{background:"none"},onClick:async e=>{e.preventDefault();try{(await fetch("/sae202/?page=deconnexion",{method:"GET",credentials:"include",headers:{Accept:"application/json"}})).ok?window.location.href="/":alert("Erreur lors de la d\xe9connexion")}catch(e){alert("Erreur lors de la d\xe9connexion")}},children:"D\xe9connexion"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:(0,r.jsx)(l(),{href:"/inscription",className:"hover:text-yellow-400 transition",children:"Inscription"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l(),{href:"/connexion",className:"hover:text-yellow-400 transition",children:"Connexion"})})]}),(0,r.jsx)("li",{children:(0,r.jsx)(l(),{href:"/mentions-legales",className:"hover:text-yellow-400 transition",children:"Mentions l\xe9gales"})})]})})}},8260:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>c});var r=n(5155),t=n(2115),l=n(5695),a=n(7583),i=n(6874),o=n.n(i);function c(){let[e,s]=(0,t.useState)(""),[n,i]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),h=(0,l.useRouter)(),x=async s=>{s.preventDefault(),d("");let r=await fetch("/sae202/?page=connexion",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams({email:e,mot_de_passe:n}),credentials:"include"});if(r.ok){let e=await r.json();e.success?h.push("/"):d(e.error||"Erreur lors de la connexion")}else d("Erreur lors de la connexion")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.A,{isConnected:!1,isAdmin:!1}),(0,r.jsxs)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded shadow",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Connexion"}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block font-semibold mb-1",children:"Email :"}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",required:!0,value:e,onChange:e=>s(e.target.value),className:"w-full border rounded px-3 py-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"mot_de_passe",className:"block font-semibold mb-1",children:"Mot de passe :"}),(0,r.jsx)("input",{type:"password",id:"mot_de_passe",name:"mot_de_passe",required:!0,value:n,onChange:e=>i(e.target.value),className:"w-full border rounded px-3 py-2"})]}),(0,r.jsx)("button",{type:"submit",className:"mt-4 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold py-2 px-4 rounded transition w-full",children:"Se connecter"})]}),(0,r.jsxs)("p",{className:"mt-4 text-gray-700",children:["Pas encore inscrit ?"," ",(0,r.jsx)(o(),{href:"/inscription",className:"text-yellow-600 underline hover:text-yellow-700",children:"Inscrivez-vous ici"}),"."]}),c&&(0,r.jsx)("p",{className:"text-red-600 mt-4",children:c})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[874,441,684,358],()=>s(5302)),_N_E=e.O()}]);