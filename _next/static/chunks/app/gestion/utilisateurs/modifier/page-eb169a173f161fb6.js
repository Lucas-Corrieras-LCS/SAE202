(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{3089:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(5155),a=t(2115),n=t(5695),l=t(5235);function i(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)().get("id"),[t,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[o,u]=(0,a.useState)("");(0,a.useEffect)(()=>{s&&fetch("/gestion?page=utilisateur_json&id=".concat(s),{credentials:"include",headers:{Accept:"application/json"}}).then(async e=>{let s=e.headers.get("content-type");if(s&&s.includes("application/json"))return e.json();throw Error("R\xe9ponse inattendue : "+await e.text())}).then(e=>{e.error?u(e.error):i(e.utilisateur),d(!1)}).catch(e=>{u(e.message),d(!1)})},[s]);let h=async t=>{t.preventDefault(),u("");let r=new FormData(t.target),a=await fetch("/gestion?page=modifier_utilisateur&id=".concat(s),{method:"POST",credentials:"include",body:new URLSearchParams(r),headers:{Accept:"application/json"}});(await a.json()).success?e.push("/gestion/utilisateurs"):u("Erreur lors de la modification.")};return s?c?(0,r.jsx)("div",{children:"Chargement..."}):o?(0,r.jsxs)("div",{className:"max-w-xl mx-auto mt-8 p-6 bg-white rounded shadow text-red-600",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Acc\xe8s refus\xe9"}),(0,r.jsx)("p",{children:"Acc\xe8s refus\xe9"===o?(0,r.jsxs)(r.Fragment,{children:["Vous n'\xeates pas admin."," ",(0,r.jsx)("a",{href:"/inscription.html",children:"Inscrivez-vous"})," ou"," ",(0,r.jsx)("a",{href:"/connexion.html",children:"connectez-vous"})," avec un compte admin."]}):o})]}):t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{}),(0,r.jsxs)("div",{className:"max-w-xl mx-auto mt-8 p-6 bg-white rounded shadow",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Modifier un utilisateur"}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Nom :"}),(0,r.jsx)("input",{type:"text",name:"nom",defaultValue:t.nom,required:!0,className:"border rounded px-3 py-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Pr\xe9nom :"}),(0,r.jsx)("input",{type:"text",name:"prenom",defaultValue:t.prenom,required:!0,className:"border rounded px-3 py-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Email :"}),(0,r.jsx)("input",{type:"email",name:"email",defaultValue:t.email,required:!0,className:"border rounded px-3 py-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"\xc2ge :"}),(0,r.jsx)("input",{type:"number",name:"age",defaultValue:t.age,className:"border rounded px-3 py-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"T\xe9l\xe9phone :"}),(0,r.jsx)("input",{type:"text",name:"telephone",defaultValue:t.telephone,className:"border rounded px-3 py-2 w-full"})]}),(0,r.jsx)("button",{type:"submit",className:"bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold py-2 px-4 rounded transition",children:"Enregistrer"}),o&&(0,r.jsx)("p",{className:"text-red-600",children:o})]})]})]}):(0,r.jsx)("div",{children:"Utilisateur introuvable."}):(0,r.jsx)("div",{children:"Aucun utilisateur s\xe9lectionn\xe9."})}function c(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{children:"Chargement..."}),children:(0,r.jsx)(i,{})})}},5235:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var r=t(5155),a=t(6874),n=t.n(a);function l(){return(0,r.jsx)("nav",{className:"bg-gray-900 text-white shadow mb-8",children:(0,r.jsxs)("ul",{className:"flex flex-wrap items-center gap-4 px-6 py-3",children:[(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/gestion",className:"hover:text-yellow-400 font-semibold transition",children:"Tableau de bord"})}),(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/gestion/utilisateurs",className:"hover:text-yellow-400 transition",children:"Utilisateurs"})}),(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/gestion/commentaires",className:"hover:text-yellow-400 transition",children:"Commentaires"})}),(0,r.jsx)("li",{children:(0,r.jsx)(n(),{href:"/",className:"hover:text-yellow-400 transition",children:"Retour \xe0 l'accueil du site"})})]})})}},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},5737:(e,s,t)=>{Promise.resolve().then(t.bind(t,3089))}},e=>{var s=s=>e(e.s=s);e.O(0,[874,441,684,358],()=>s(5737)),_N_E=e.O()}]);