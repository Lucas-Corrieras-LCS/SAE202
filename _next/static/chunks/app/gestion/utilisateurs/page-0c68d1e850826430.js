(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[159],{349:(e,s,r)=>{Promise.resolve().then(r.bind(r,7123))},5235:(e,s,r)=>{"use strict";r.d(s,{A:()=>l});var t=r(5155),i=r(6874),a=r.n(i);function l(){return(0,t.jsx)("nav",{className:"bg-gray-900 text-white shadow mb-8",children:(0,t.jsxs)("ul",{className:"flex flex-wrap items-center gap-4 px-6 py-3",children:[(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/gestion",className:"hover:text-yellow-400 font-semibold transition",children:"Tableau de bord"})}),(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/gestion/utilisateurs",className:"hover:text-yellow-400 transition",children:"Utilisateurs"})}),(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/gestion/commentaires",className:"hover:text-yellow-400 transition",children:"Commentaires"})}),(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/",className:"hover:text-yellow-400 transition",children:"Retour \xe0 l'accueil du site"})})]})})}},7123:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var t=r(5155),i=r(2115),a=r(5235);function l(){let[e,s]=(0,i.useState)([]),[r,l]=(0,i.useState)(!0),[n,c]=(0,i.useState)("");(0,i.useEffect)(()=>{fetch("/gestion?page=utilisateurs_json",{credentials:"include",headers:{Accept:"application/json"}}).then(async e=>{let s=e.headers.get("content-type");if(s&&s.includes("application/json"))return e.json();throw Error("R\xe9ponse inattendue : "+await e.text())}).then(e=>{e.error?c(e.error):s(e.utilisateurs||[]),l(!1)}).catch(e=>{c(e.message),l(!1)})},[]);let d=async e=>{if(!window.confirm("\xcates-vous s\xfbr de vouloir supprimer cet utilisateur ?"))return;let r=await fetch("/gestion?page=supprimer_utilisateur&id=".concat(e),{method:"GET",credentials:"include",headers:{Accept:"application/json"}});(await r.json()).success?s(s=>s.filter(s=>s.id!==e)):alert("Erreur lors de la suppression.")};return r?(0,t.jsx)("div",{children:"Chargement..."}):n?(0,t.jsxs)("div",{className:"max-w-xl mx-auto mt-8 p-6 bg-white rounded shadow text-red-600",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Acc\xe8s refus\xe9"}),(0,t.jsx)("p",{children:"Acc\xe8s refus\xe9"===n?(0,t.jsxs)(t.Fragment,{children:["Vous n'\xeates pas admin."," ",(0,t.jsx)("a",{href:"/inscription.html",children:"Inscrivez-vous"})," ou"," ",(0,t.jsx)("a",{href:"/connexion.html",children:"connectez-vous"})," avec un compte admin."]}):n})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.A,{}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto mt-8 p-6 bg-white rounded shadow",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Liste des Utilisateurs"}),(0,t.jsxs)("table",{className:"min-w-full border",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border px-2 py-1",children:"ID"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Nom"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Pr\xe9nom"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Email"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"\xc2ge"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"T\xe9l\xe9phone"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"R\xf4le"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border px-2 py-1",children:e.id}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.nom}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.prenom}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.email}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.age}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.telephone}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.is_admin?"Administrateur":"Utilisateur"}),(0,t.jsxs)("td",{className:"border px-2 py-1",children:[(0,t.jsx)("a",{href:"/gestion/utilisateurs/modifier?id=".concat(e.id),className:"text-blue-600 hover:underline mr-2",children:"Modifier"}),(0,t.jsx)("button",{className:"text-red-600 hover:underline",onClick:async s=>{s.preventDefault(),await d(e.id)},children:"Supprimer"})]})]},e.id))})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[874,441,684,358],()=>s(349)),_N_E=e.O()}]);