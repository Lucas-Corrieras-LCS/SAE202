(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[296],{5235:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var t=r(5155),n=r(6874),a=r.n(n);function i(){return(0,t.jsx)("nav",{className:"bg-gray-900 text-white shadow mb-8",children:(0,t.jsxs)("ul",{className:"flex flex-wrap items-center gap-4 px-6 py-3",children:[(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/gestion",className:"hover:text-yellow-400 font-semibold transition",children:"Tableau de bord"})}),(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/gestion/utilisateurs",className:"hover:text-yellow-400 transition",children:"Utilisateurs"})}),(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/gestion/commentaires",className:"hover:text-yellow-400 transition",children:"Commentaires"})}),(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/",className:"hover:text-yellow-400 transition",children:"Retour \xe0 l'accueil du site"})})]})})}},8574:(e,s,r)=>{Promise.resolve().then(r.bind(r,9146))},9146:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var t=r(5155),n=r(2115),a=r(5235);function i(){let[e,s]=(0,n.useState)([]),[r,i]=(0,n.useState)([]),[c,l]=(0,n.useState)(!0),[d,o]=(0,n.useState)("");(0,n.useEffect)(()=>{fetch("/gestion?page=commentaires_json",{credentials:"include",headers:{Accept:"application/json"}}).then(async e=>{let s=e.headers.get("content-type");if(s&&s.includes("application/json"))return e.json();throw Error("R\xe9ponse inattendue : "+await e.text())}).then(e=>{e.error?o(e.error):(s(e.commentaires||[]),i(e.tousCommentaires||[])),l(!1)}).catch(e=>{o(e.message),l(!1)})},[]);let h=async(e,r)=>{if("supprimer"===e&&!window.confirm("Supprimer ce commentaire ?"))return;await fetch("/gestion?page=".concat(e,"_commentaire&id=").concat(r),{credentials:"include",headers:{Accept:"application/json"}});let t=await fetch("/gestion?page=commentaires_json",{credentials:"include",headers:{Accept:"application/json"}}).then(e=>e.json());s(t.commentaires||[]),i(t.tousCommentaires||[])};return c?(0,t.jsx)("div",{children:"Chargement..."}):d?(0,t.jsxs)("div",{className:"max-w-xl mx-auto mt-8 p-6 bg-white rounded shadow text-red-600",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Acc\xe8s refus\xe9"}),(0,t.jsx)("p",{children:"Acc\xe8s refus\xe9"===d?(0,t.jsxs)(t.Fragment,{children:["Vous n'\xeates pas admin."," ",(0,t.jsx)("a",{href:"/inscription.html",children:"Inscrivez-vous"})," ou"," ",(0,t.jsx)("a",{href:"/connexion.html",children:"connectez-vous"})," avec un compte admin."]}):d})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.A,{}),(0,t.jsxs)("div",{className:"max-w-5xl mx-auto mt-8 p-6 bg-white rounded shadow",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Gestion des Commentaires"}),(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Commentaires \xe0 valider :"}),(0,t.jsxs)("table",{className:"min-w-full border mb-8",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border px-2 py-1",children:"ID"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Contenu"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Date"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border px-2 py-1",children:e.id}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.contenu}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.created_at}),(0,t.jsxs)("td",{className:"border px-2 py-1",children:[(0,t.jsx)("button",{className:"text-green-600 hover:underline mr-2",onClick:()=>h("approuver",e.id),children:"Valider"}),(0,t.jsx)("button",{className:"text-red-600 hover:underline",onClick:()=>h("refuser",e.id),children:"Refuser"})]})]},e.id))})]}),(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Tous les commentaires :"}),(0,t.jsxs)("table",{className:"min-w-full border",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border px-2 py-1",children:"ID"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Utilisateur"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Contenu"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Date"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Approuv\xe9"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:r.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border px-2 py-1",children:e.id}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.user_id}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.contenu}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.created_at}),(0,t.jsx)("td",{className:"border px-2 py-1",children:e.is_approved?"Oui":"Non"}),(0,t.jsxs)("td",{className:"border px-2 py-1",children:[(0,t.jsx)("a",{href:"/gestion/commentaires/modifier?id=".concat(e.id),className:"text-blue-600 hover:underline mr-2",children:"Modifier"}),(0,t.jsx)("button",{className:"text-red-600 hover:underline",onClick:()=>h("supprimer",e.id),children:"Supprimer"})]})]},e.id))})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[874,441,684,358],()=>s(8574)),_N_E=e.O()}]);