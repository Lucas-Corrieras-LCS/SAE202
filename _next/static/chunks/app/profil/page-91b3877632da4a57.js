(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{9278:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var n=i(5155),r=i(2115),l=i(5666),s=i(7771),a=i(6408);function o(e){let{error:t}=e;return(0,n.jsx)("section",{className:"min-h-screen bg-gradient-to-br from-[#2D3670] via-[#1A2454] to-[#0D1A34] flex flex-col items-center justify-center",children:(0,n.jsxs)(a.P.div,{className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/10 p-8 max-w-md w-full text-center",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,n.jsx)("h1",{className:"orbitron text-3xl font-bold text-white mb-4",children:"Profil"}),(0,n.jsx)("p",{className:"text-red-400",children:t})]})})}function d(){return(0,n.jsx)("section",{className:"min-h-screen bg-gradient-to-br from-[#2D3670] via-[#1A2454] to-[#0D1A34] flex flex-col items-center justify-center",children:(0,n.jsxs)(a.P.div,{className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/10 p-8 max-w-md w-full text-center",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,n.jsx)("h1",{className:"orbitron text-3xl font-bold text-white mb-4",children:"Profil"}),(0,n.jsx)("p",{className:"text-[#B0B4CC]",children:"Chargement..."})]})})}function c(e){let{error:t,profil:i}=e;return(0,n.jsxs)("section",{className:"relative min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-[#2D3670] via-[#1A2454] to-[#0D1A34] px-4 py-10 overflow-hidden",children:[(0,n.jsx)(l.kQ,{speed:-20,children:(0,n.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[60vw] h-[60vw] bg-purple-700/20 blur-3xl rounded-full z-0 pointer-events-none"})}),(0,n.jsxs)(a.P.div,{className:"relative z-10 w-full max-w-lg bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/10 p-8 md:p-12",initial:{opacity:0,y:40,scale:.97},animate:{opacity:1,y:0,scale:1},transition:{duration:.7,ease:[.25,.1,.25,1]},children:[(0,n.jsx)(a.P.h1,{className:"orbitron text-3xl md:text-4xl font-bold mb-8 text-white text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:"Mon profil"}),t&&(0,n.jsx)("p",{className:"text-red-400 mb-4",children:t}),(0,n.jsxs)(a.P.form,{className:"space-y-5",initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.07}}},onSubmit:async e=>{e.preventDefault();let t=new FormData(e.target);(await fetch("http://localhost:8080/?page=profil&action=update",{method:"POST",credentials:"include",body:t})).ok?(alert("Profil mis \xe0 jour !"),window.location.reload()):alert("Erreur lors de la mise \xe0 jour")},children:[(0,n.jsxs)(a.P.div,{variants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},children:[(0,n.jsx)("label",{className:"block font-semibold mb-1 text-[#B0B4CC]",children:"Nom :"}),(0,n.jsx)("input",{name:"nom",defaultValue:i.nom,required:!0,className:"w-full rounded-xl px-4 py-2 bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-[#6B21A8] transition"})]}),(0,n.jsxs)(a.P.div,{variants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},children:[(0,n.jsx)("label",{className:"block font-semibold mb-1 text-[#B0B4CC]",children:"Pr\xe9nom :"}),(0,n.jsx)("input",{name:"prenom",defaultValue:i.prenom,required:!0,className:"w-full rounded-xl px-4 py-2 bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-[#6B21A8] transition"})]}),(0,n.jsxs)(a.P.div,{variants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},children:[(0,n.jsx)("label",{className:"block font-semibold mb-1 text-[#B0B4CC]",children:"Email :"}),(0,n.jsx)("input",{name:"email",type:"email",defaultValue:i.email,required:!0,className:"w-full rounded-xl px-4 py-2 bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-[#6B21A8] transition"})]}),(0,n.jsxs)(a.P.div,{variants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},children:[(0,n.jsx)("label",{className:"block font-semibold mb-1 text-[#B0B4CC]",children:"T\xe9l\xe9phone :"}),(0,n.jsx)("input",{name:"telephone",defaultValue:i.telephone,className:"w-full rounded-xl px-4 py-2 bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-[#6B21A8] transition"})]}),(0,n.jsxs)(a.P.div,{variants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},children:[(0,n.jsx)("label",{className:"block font-semibold mb-1 text-[#B0B4CC]",children:"\xc2ge :"}),(0,n.jsx)("input",{name:"age",type:"number",defaultValue:i.age,required:!0,className:"w-full rounded-xl px-4 py-2 bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-[#6B21A8] transition"})]}),(0,n.jsx)(a.P.button,{type:"submit",className:"w-full mt-4 bg-gradient-to-r from-[#023377] to-[#6B21A8] text-white font-bold py-2 px-4 rounded-full shadow-lg transition-transform duration-300",whileHover:{scale:1.04},whileTap:{scale:.97},variants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},children:"Mettre \xe0 jour"})]})]})]})}function u(){let[e,t]=(0,r.useState)(null),[i,l]=(0,r.useState)(""),[a,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{fetch("/sae202/?page=accueil&format=json",{credentials:"include"}).then(e=>e.json()).then(e=>{u(e.isConnected),h(e.isAdmin)}).catch(()=>{u(!1),h(!1)}),fetch("/sae202/?page=profil&format=json",{credentials:"include"}).then(e=>e.json()).then(e=>{e.isConnected?t(e.profil):l("Vous devez \xeatre connect\xe9 pour acc\xe9der \xe0 votre profil.")}).catch(()=>l("Erreur lors du chargement du profil."))},[]),i)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{isConnected:!1,isAdmin:!1}),(0,n.jsx)(o,{error:i})]}):e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{isConnected:a,isAdmin:m}),(0,n.jsx)(c,{isConnected:a,isAdmin:m,error:i,profil:e})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{isConnected:a,isAdmin:m}),(0,n.jsx)(d,{isConnected:a,isAdmin:m})]})}},9401:(e,t,i)=>{Promise.resolve().then(i.bind(i,9278))}},e=>{var t=t=>e(e.s=t);e.O(0,[833,666,771,441,684,358],()=>t(9401)),_N_E=e.O()}]);