(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{233:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>t});var s=n(5155),r=n(2115),i=n(7583);function t(){let[e,l]=(0,r.useState)(null),[n,t]=(0,r.useState)(""),[a,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{fetch("/sae202/?page=accueil&format=json",{credentials:"include"}).then(e=>e.json()).then(e=>{o(e.isConnected),d(e.isAdmin)}),fetch("/sae202/?page=profil&format=json",{credentials:"include"}).then(e=>e.json()).then(e=>{e.isConnected?l(e.profil):t("Vous devez \xeatre connect\xe9 pour acc\xe9der \xe0 votre profil.")}).catch(()=>t("Erreur lors du chargement du profil."))},[]),n)?(0,s.jsxs)("div",{children:[(0,s.jsx)(i.A,{isConnected:!1,isAdmin:!1}),(0,s.jsx)("h1",{children:"Profil"}),(0,s.jsx)("p",{style:{color:"red"},children:n})]}):e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{isConnected:a,isAdmin:c}),(0,s.jsxs)("div",{className:"max-w-xl mx-auto mt-8 p-6 bg-white rounded shadow",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Mon profil"}),n&&(0,s.jsx)("p",{className:"text-red-600 mb-4",children:n}),e&&(0,s.jsxs)("form",{className:"space-y-4",onSubmit:async e=>{e.preventDefault();let l=new FormData(e.target);(await fetch("/sae202/?page=profil&action=update",{method:"POST",credentials:"include",body:l})).ok?(alert("Profil mis \xe0 jour !"),window.location.reload()):alert("Erreur lors de la mise \xe0 jour")},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-semibold mb-1",children:"Nom :"}),(0,s.jsx)("input",{name:"nom",defaultValue:e.nom,required:!0,className:"w-full border rounded px-3 py-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-semibold mb-1",children:"Pr\xe9nom :"}),(0,s.jsx)("input",{name:"prenom",defaultValue:e.prenom,required:!0,className:"w-full border rounded px-3 py-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-semibold mb-1",children:"Email :"}),(0,s.jsx)("input",{name:"email",type:"email",defaultValue:e.email,required:!0,className:"w-full border rounded px-3 py-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-semibold mb-1",children:"T\xe9l\xe9phone :"}),(0,s.jsx)("input",{name:"telephone",defaultValue:e.telephone,className:"w-full border rounded px-3 py-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-semibold mb-1",children:"\xc2ge :"}),(0,s.jsx)("input",{name:"age",type:"number",defaultValue:e.age,required:!0,className:"w-full border rounded px-3 py-2"})]}),(0,s.jsx)("button",{type:"submit",className:"mt-4 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold py-2 px-4 rounded transition",children:"Mettre \xe0 jour"})]})]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)(i.A,{isConnected:a,isAdmin:c}),(0,s.jsx)("h1",{children:"Profil"}),(0,s.jsx)("p",{children:"Chargement..."})]})}},7583:(e,l,n)=>{"use strict";n.d(l,{A:()=>t});var s=n(5155),r=n(6874),i=n.n(r);function t(e){let{isConnected:l,isAdmin:n}=e;return(0,s.jsx)("nav",{className:"bg-gray-900 text-white shadow mb-8",children:(0,s.jsxs)("ul",{className:"flex flex-wrap items-center gap-4 px-6 py-3",children:[(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"/",className:"hover:text-yellow-400 font-semibold transition",children:"Accueil"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"/concept",className:"hover:text-yellow-400 transition",children:"Concept"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"/infos",className:"hover:text-yellow-400 transition",children:"Infos pratiques"})}),l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"/messagerie",className:"hover:text-yellow-400 transition",children:"Messagerie interne"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"/profil",className:"hover:text-yellow-400 transition",children:"Mon profil"})}),n&&(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"/gestion",className:"hover:text-red-400 font-bold transition",children:"Admin"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"hover:text-yellow-400 transition bg-transparent border-none p-0 m-0 cursor-pointer",style:{background:"none"},onClick:async e=>{e.preventDefault();try{(await fetch("/sae202/?page=deconnexion",{method:"GET",credentials:"include",headers:{Accept:"application/json"}})).ok?window.location.href="/":alert("Erreur lors de la d\xe9connexion")}catch(e){alert("Erreur lors de la d\xe9connexion")}},children:"D\xe9connexion"})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"/inscription",className:"hover:text-yellow-400 transition",children:"Inscription"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"/connexion",className:"hover:text-yellow-400 transition",children:"Connexion"})})]}),(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"/mentions-legales",className:"hover:text-yellow-400 transition",children:"Mentions l\xe9gales"})})]})})}},9401:(e,l,n)=>{Promise.resolve().then(n.bind(n,233))}},e=>{var l=l=>e(e.s=l);e.O(0,[874,441,684,358],()=>l(9401)),_N_E=e.O()}]);